import pandas as pd
import numpy as np

# Load CSV
file_path = r"C:\Users\galrt\Desktop\final_project\results\prediction_data\pv_forecast_t+60 1.csv"
df = pd.read_csv(file_path)

# Extract predictions and targets
y_pred = df['prediction'].values
y_true = df['target'].values

# Compute p_v^max for NRMSE
p_v_max = np.max(y_true)

# Compute T
T = len(y_true)

# Compute NRMSE
nrmse = np.sqrt(
    (1 / T) * np.sum(((y_pred - y_true) / p_v_max) ** 2)
)

# Compute NMAE
nmae = np.sum(np.abs(y_pred - y_true)) / np.sum(np.abs(y_true))

# Print results
print(f"NRMSE for 15 minutes prediction: {nrmse:.4f}")
print(f"NMAE for 15 minutes prediction:  {nmae:.4f}")
